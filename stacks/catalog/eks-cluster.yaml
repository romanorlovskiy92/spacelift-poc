# `import` supports POSIX-style Globs for file names/paths (double-star `**` is supported)
# https://en.wikipedia.org/wiki/Glob_(programming)
# https://pkg.go.dev/gopkg.in/godo.v2/glob
# https://github.com/bmatcuk/doublestar
# File extensions are optional (if not specified, `.yaml` is used by default)
# import:
#   - catalog/services/service-?.*

components:
  terraform:
    "eks/cluster":
      backend:
        s3:
          workspace_key_prefix: eks-cluster
      remote_state_backend:
        s3:
          workspace_key_prefix: eks-cluster
      settings:
        spacelift:
          workspace_enabled: true
          aws_role_enabled: true
          worker_type: shared
      vars:
        enabled: true
        cluster_kubernetes_version: "1.21"
        oidc_provider_enabled: true
        # public_access_cidrs: ["72.107.0.0/24"]
        managed_node_groups_enabled: true
        node_groups: # null means use default set in defaults.auto.tf.vars
          main:
            # values of `null` will be replaced with default values
            # availability_zones = null will create 1 auto scaling group in
            # each availability zone in region_availability_zones
            availability_zones: null

            desired_group_size: 3 # number of instances to start with, must be >= number of AZs
            min_group_size: 3 # must be  >= number of AZs
            max_group_size: 6

            # Can only set one of ami_release_version or kubernetes_version
            # Leave both null to use latest AMI for Cluster Kubernetes version
            kubernetes_version: null # use cluster Kubernetes version
            ami_release_version: null # use latest AMI for Kubernetes version

            # disk encryption
            disk_encryption_enabled: false

            attributes: []
            create_before_destroy: true
            disk_size: 100
            cluster_autoscaler_enabled: true
            instance_types:
              - t3.medium
            ami_type: AL2_x86_64 # use "AL2_x86_64" for standard instances, "AL2_x86_64_GPU" for GPU instances
            kubernetes_labels: {}
            kubernetes_taints: {}
            resources_to_tag:
              - instance
              - volume
            tags: null
